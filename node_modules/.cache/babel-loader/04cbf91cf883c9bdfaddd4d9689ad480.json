{"ast":null,"code":"import _slicedToArray from\"E:/Desktop/game-pikachu-v2/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./App.css\";import{Switch,Route,useHistory}from\"react-router-dom\";import MainPage from\"./pages/MainPage\";import{Routes}from\"./routes/CONSTANTS\";import SinglePlayerPage from\"./pages/SinglePlayerPage\";import MultiPlayerPage from\"./pages/MultiPlayerPage\";import SpeedModePage from\"./pages/SpeedModePage\";import{useRecoilState,useRecoilValue}from\"recoil\";import gameSoundState from\"./recoil/atoms/gameSoundState\";import{useTranslation}from\"react-i18next\";import i18n from\"./services/i18n\";import{useEffect}from\"react\";import useLocalStorage from\"./hooks/useLocalStorage\";import SurvivalModePage from\"./pages/SurvivalModePage\";import playerState from\"./recoil/atoms/playerState\";import PlayerPage from\"./pages/PlayerPage\";import ToggleSound from\"./components/ToggleSound\";import ToggleMusic from\"./components/ToggleMusic\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useTranslation=useTranslation(),t=_useTranslation.t;var _useRecoilValue=useRecoilValue(gameSoundState),soundReady=_useRecoilValue.soundReady;var history=useHistory();var _useRecoilState=useRecoilState(playerState),_useRecoilState2=_slicedToArray(_useRecoilState,2),currentPlayer=_useRecoilState2[0],setPlayer=_useRecoilState2[1];var _useLocalStorage=useLocalStorage(\"language\",\"vi\"),_useLocalStorage2=_slicedToArray(_useLocalStorage,1),language=_useLocalStorage2[0];var _useLocalStorage3=useLocalStorage(\"playerName\",\"\"),_useLocalStorage4=_slicedToArray(_useLocalStorage3,2),prevPlayerName=_useLocalStorage4[0],saveLocalPlayerName=_useLocalStorage4[1];useEffect(function(){i18n.changeLanguage(language);},[language]);useEffect(function(){if(prevPlayerName&&prevPlayerName!==\"\"&&prevPlayerName.replace(/-.*$/g,\"\").match(/^[a-zA-Z0-9 ]*$/gim)){if(currentPlayer.playerName.trim()!==\"\"&&currentPlayer.playerName.replace(/-.*$/g,\"\").match(/^[a-zA-Z0-9 ]*$/gim)){setPlayer({playerName:currentPlayer.playerName,playerTiming:0});}else{setPlayer({playerName:prevPlayerName,playerTiming:0});}}else{saveLocalPlayerName(\"\");history.push(Routes.PLAYER_PAGE);}},[prevPlayerName]);return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[soundReady&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ToggleMusic,{}),/*#__PURE__*/_jsx(ToggleSound,{})]}),!soundReady&&/*#__PURE__*/_jsx(\"h1\",{children:t(\"Preparing resource...\")}),soundReady&&/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:Routes.MAIN_PAGE,exact:true,children:/*#__PURE__*/_jsx(MainPage,{})}),/*#__PURE__*/_jsx(Route,{path:Routes.SINGLE_PLAYER_PAGE,exact:true,children:/*#__PURE__*/_jsx(SinglePlayerPage,{})}),/*#__PURE__*/_jsx(Route,{path:Routes.MULTI_PLAYER_PAGE,exact:true,children:/*#__PURE__*/_jsx(MultiPlayerPage,{})}),/*#__PURE__*/_jsx(Route,{path:Routes.SPEED_MODE_PAGE,exact:true,children:/*#__PURE__*/_jsx(SpeedModePage,{})}),/*#__PURE__*/_jsx(Route,{path:Routes.SURVIVAL_MODE_PAGE,exact:true,children:/*#__PURE__*/_jsx(SurvivalModePage,{})}),/*#__PURE__*/_jsx(Route,{path:Routes.PLAYER_PAGE,exact:true,children:/*#__PURE__*/_jsx(PlayerPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(MainPage,{})})]})]});}export default App;","map":{"version":3,"sources":["E:/Desktop/game-pikachu-v2/src/App.tsx"],"names":["Switch","Route","useHistory","MainPage","Routes","SinglePlayerPage","MultiPlayerPage","SpeedModePage","useRecoilState","useRecoilValue","gameSoundState","useTranslation","i18n","useEffect","useLocalStorage","SurvivalModePage","playerState","PlayerPage","ToggleSound","ToggleMusic","App","t","soundReady","history","currentPlayer","setPlayer","language","prevPlayerName","saveLocalPlayerName","changeLanguage","replace","match","playerName","trim","playerTiming","push","PLAYER_PAGE","MAIN_PAGE","SINGLE_PLAYER_PAGE","MULTI_PLAYER_PAGE","SPEED_MODE_PAGE","SURVIVAL_MODE_PAGE"],"mappings":"iJAAA,MAAO,WAAP,CACA,OAASA,MAAT,CAAiBC,KAAjB,CAAwBC,UAAxB,KAA0C,kBAA1C,CACA,MAAOC,CAAAA,QAAP,KAAqB,kBAArB,CACA,OAASC,MAAT,KAAuB,oBAAvB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,0BAA7B,CACA,MAAOC,CAAAA,eAAP,KAA4B,yBAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,uBAA1B,CACA,OAASC,cAAT,CAAyBC,cAAzB,KAA+C,QAA/C,CACA,MAAOC,CAAAA,cAAP,KAA2B,+BAA3B,CACA,OAASC,cAAT,KAA+B,eAA/B,CACA,MAAOC,CAAAA,IAAP,KAAiB,iBAAjB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,MAAOC,CAAAA,eAAP,KAA4B,yBAA5B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,0BAA7B,CACA,MAAOC,CAAAA,WAAP,KAAwB,4BAAxB,CACA,MAAOC,CAAAA,UAAP,KAAuB,oBAAvB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,CACA,MAAOC,CAAAA,WAAP,KAAwB,0BAAxB,C,6IAEA,QAASC,CAAAA,GAAT,EAAe,CACb,oBAAcT,cAAc,EAA5B,CAAQU,CAAR,iBAAQA,CAAR,CACA,oBAAuBZ,cAAc,CAACC,cAAD,CAArC,CAAQY,UAAR,iBAAQA,UAAR,CACA,GAAMC,CAAAA,OAAO,CAAGrB,UAAU,EAA1B,CACA,oBAAmCM,cAAc,CAACQ,WAAD,CAAjD,oDAAOQ,aAAP,qBAAsBC,SAAtB,qBACA,qBAAmBX,eAAe,CAAC,UAAD,CAAa,IAAb,CAAlC,sDAAOY,QAAP,sBACA,sBAA8CZ,eAAe,CAC3D,YAD2D,CAE3D,EAF2D,CAA7D,uDAAOa,cAAP,sBAAuBC,mBAAvB,sBAKAf,SAAS,CAAC,UAAM,CACdD,IAAI,CAACiB,cAAL,CAAoBH,QAApB,EACD,CAFQ,CAEN,CAACA,QAAD,CAFM,CAAT,CAIAb,SAAS,CAAC,UAAM,CACd,GACEc,cAAc,EACdA,cAAc,GAAK,EADnB,EAEAA,cAAc,CAACG,OAAf,CAAuB,OAAvB,CAAgC,EAAhC,EAAoCC,KAApC,CAA0C,oBAA1C,CAHF,CAIE,CACA,GACEP,aAAa,CAACQ,UAAd,CAAyBC,IAAzB,KAAoC,EAApC,EACAT,aAAa,CAACQ,UAAd,CACGF,OADH,CACW,OADX,CACoB,EADpB,EAEGC,KAFH,CAES,oBAFT,CAFF,CAKE,CACAN,SAAS,CAAC,CAAEO,UAAU,CAAER,aAAa,CAACQ,UAA5B,CAAwCE,YAAY,CAAE,CAAtD,CAAD,CAAT,CACD,CAPD,IAOO,CACLT,SAAS,CAAC,CAAEO,UAAU,CAAEL,cAAd,CAA8BO,YAAY,CAAE,CAA5C,CAAD,CAAT,CACD,CACF,CAfD,IAeO,CACLN,mBAAmB,CAAC,EAAD,CAAnB,CACAL,OAAO,CAACY,IAAR,CAAa/B,MAAM,CAACgC,WAApB,EACD,CACF,CApBQ,CAoBN,CAACT,cAAD,CApBM,CAAT,CAsBA,mBACE,aAAK,SAAS,CAAC,KAAf,WACGL,UAAU,eACT,wCACE,KAAC,WAAD,IADF,cAEE,KAAC,WAAD,IAFF,GAFJ,CAOG,CAACA,UAAD,eAAe,oBAAKD,CAAC,CAAC,uBAAD,CAAN,EAPlB,CAQGC,UAAU,eACT,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAElB,MAAM,CAACiC,SAApB,CAA+B,KAAK,KAApC,uBACE,KAAC,QAAD,IADF,EADF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAEjC,MAAM,CAACkC,kBAApB,CAAwC,KAAK,KAA7C,uBACE,KAAC,gBAAD,IADF,EAJF,cAOE,KAAC,KAAD,EAAO,IAAI,CAAElC,MAAM,CAACmC,iBAApB,CAAuC,KAAK,KAA5C,uBACE,KAAC,eAAD,IADF,EAPF,cAUE,KAAC,KAAD,EAAO,IAAI,CAAEnC,MAAM,CAACoC,eAApB,CAAqC,KAAK,KAA1C,uBACE,KAAC,aAAD,IADF,EAVF,cAaE,KAAC,KAAD,EAAO,IAAI,CAAEpC,MAAM,CAACqC,kBAApB,CAAwC,KAAK,KAA7C,uBACE,KAAC,gBAAD,IADF,EAbF,cAgBE,KAAC,KAAD,EAAO,IAAI,CAAErC,MAAM,CAACgC,WAApB,CAAiC,KAAK,KAAtC,uBACE,KAAC,UAAD,IADF,EAhBF,cAmBE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,uBACE,KAAC,QAAD,IADF,EAnBF,GATJ,GADF,CAoCD,CAED,cAAehB,CAAAA,GAAf","sourcesContent":["import \"./App.css\";\r\nimport { Switch, Route, useHistory } from \"react-router-dom\";\r\nimport MainPage from \"./pages/MainPage\";\r\nimport { Routes } from \"./routes/CONSTANTS\";\r\nimport SinglePlayerPage from \"./pages/SinglePlayerPage\";\r\nimport MultiPlayerPage from \"./pages/MultiPlayerPage\";\r\nimport SpeedModePage from \"./pages/SpeedModePage\";\r\nimport { useRecoilState, useRecoilValue } from \"recoil\";\r\nimport gameSoundState from \"./recoil/atoms/gameSoundState\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport i18n from \"./services/i18n\";\r\nimport { useEffect } from \"react\";\r\nimport useLocalStorage from \"./hooks/useLocalStorage\";\r\nimport SurvivalModePage from \"./pages/SurvivalModePage\";\r\nimport playerState from \"./recoil/atoms/playerState\";\r\nimport PlayerPage from \"./pages/PlayerPage\";\r\nimport ToggleSound from \"./components/ToggleSound\";\r\nimport ToggleMusic from \"./components/ToggleMusic\";\r\n\r\nfunction App() {\r\n  const { t } = useTranslation();\r\n  const { soundReady } = useRecoilValue(gameSoundState);\r\n  const history = useHistory();\r\n  const [currentPlayer, setPlayer] = useRecoilState(playerState);\r\n  const [language] = useLocalStorage(\"language\", \"vi\");\r\n  const [prevPlayerName, saveLocalPlayerName] = useLocalStorage(\r\n    \"playerName\",\r\n    \"\"\r\n  );\r\n\r\n  useEffect(() => {\r\n    i18n.changeLanguage(language);\r\n  }, [language]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      prevPlayerName &&\r\n      prevPlayerName !== \"\" &&\r\n      prevPlayerName.replace(/-.*$/g, \"\").match(/^[a-zA-Z0-9 ]*$/gim)\r\n    ) {\r\n      if (\r\n        currentPlayer.playerName.trim() !== \"\" &&\r\n        currentPlayer.playerName\r\n          .replace(/-.*$/g, \"\")\r\n          .match(/^[a-zA-Z0-9 ]*$/gim)\r\n      ) {\r\n        setPlayer({ playerName: currentPlayer.playerName, playerTiming: 0 });\r\n      } else {\r\n        setPlayer({ playerName: prevPlayerName, playerTiming: 0 });\r\n      }\r\n    } else {\r\n      saveLocalPlayerName(\"\");\r\n      history.push(Routes.PLAYER_PAGE);\r\n    }\r\n  }, [prevPlayerName]);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      {soundReady && (\r\n        <>\r\n          <ToggleMusic />\r\n          <ToggleSound />\r\n        </>\r\n      )}\r\n      {!soundReady && <h1>{t(\"Preparing resource...\")}</h1>}\r\n      {soundReady && (\r\n        <Switch>\r\n          <Route path={Routes.MAIN_PAGE} exact>\r\n            <MainPage />\r\n          </Route>\r\n          <Route path={Routes.SINGLE_PLAYER_PAGE} exact>\r\n            <SinglePlayerPage />\r\n          </Route>\r\n          <Route path={Routes.MULTI_PLAYER_PAGE} exact>\r\n            <MultiPlayerPage />\r\n          </Route>\r\n          <Route path={Routes.SPEED_MODE_PAGE} exact>\r\n            <SpeedModePage />\r\n          </Route>\r\n          <Route path={Routes.SURVIVAL_MODE_PAGE} exact>\r\n            <SurvivalModePage />\r\n          </Route>\r\n          <Route path={Routes.PLAYER_PAGE} exact>\r\n            <PlayerPage />\r\n          </Route>\r\n          <Route path=\"*\">\r\n            <MainPage />\r\n          </Route>\r\n        </Switch>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}