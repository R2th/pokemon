{"ast":null,"code":"import{Link}from\"react-router-dom\";import useAsync,{ResponseStatus}from\"../../hooks/useAsync\";import{Routes}from\"../../routes/CONSTANTS\";import{dateTimeFromTimestamp,timeConvert}from\"../../utils/time\";import{useRecoilValue}from\"recoil\";import gameSoundState from\"../../recoil/atoms/gameSoundState\";import{useTranslation}from\"react-i18next\";import{GameMode}from\"../../types/game\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var TopList=function TopList(_ref){var _topPlayersResponse$d;var fetch=_ref.fetch,mode=_ref.mode;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useRecoilValue=useRecoilValue(gameSoundState),playPopUpOnSound=_useRecoilValue.playPopUpOnSound;var _useAsync=useAsync(fetch,true),status=_useAsync.status,topPlayersResponse=_useAsync.value,error=_useAsync.error;return/*#__PURE__*/_jsxs(_Fragment,{children:[topPlayersResponse&&topPlayersResponse.data===null&&(mode===GameMode.SPEED_MODE?/*#__PURE__*/_jsx(Link,{to:Routes.SPEED_MODE_PAGE,children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return playPopUpOnSound&&playPopUpOnSound();},style:{width:\"calc(100% - 32px)\",margin:16},children:t(\"Make your own ranking\")})}):/*#__PURE__*/_jsx(Link,{to:Routes.SURVIVAL_MODE_PAGE,children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return playPopUpOnSound&&playPopUpOnSound();},style:{width:\"calc(100% - 32px)\",margin:16},children:t(\"Make your own ranking\")})})),/*#__PURE__*/_jsxs(\"ol\",{className:\"rank-list\",children:[status===ResponseStatus.SUCCESS&&(topPlayersResponse===null||topPlayersResponse===void 0?void 0:topPlayersResponse.data)?topPlayersResponse===null||topPlayersResponse===void 0?void 0:(_topPlayersResponse$d=topPlayersResponse.data)===null||_topPlayersResponse$d===void 0?void 0:_topPlayersResponse$d.map(function(player,index){return player.timing&&/*#__PURE__*/_jsxs(\"li\",{children:[player.playerName,\" - \",timeConvert(player.timing),\" -\",\" \",dateTimeFromTimestamp(player.timestamp)]},\"id-\".concat(index));}):/*#__PURE__*/_jsx(\"li\",{children:t(\"Service is under maintenance\")}),status===ResponseStatus.ERROR&&error&&/*#__PURE__*/_jsx(\"p\",{className:\"has-error\",children:error})]})]});};export default TopList;","map":{"version":3,"sources":["E:/Desktop/game-pikachu-v2/src/components/Rank/TopList.tsx"],"names":["Link","useAsync","ResponseStatus","Routes","dateTimeFromTimestamp","timeConvert","useRecoilValue","gameSoundState","useTranslation","GameMode","TopList","fetch","mode","t","playPopUpOnSound","status","topPlayersResponse","value","error","data","SPEED_MODE","SPEED_MODE_PAGE","width","margin","SURVIVAL_MODE_PAGE","SUCCESS","map","player","index","timing","playerName","timestamp","ERROR"],"mappings":"AACA,OAASA,IAAT,KAAqB,kBAArB,CAEA,MAAOC,CAAAA,QAAP,EAAmBC,cAAnB,KAAyC,sBAAzC,CACA,OAASC,MAAT,KAAuB,wBAAvB,CACA,OAASC,qBAAT,CAAgCC,WAAhC,KAAmD,kBAAnD,CACA,OAASC,cAAT,KAA+B,QAA/B,CACA,MAAOC,CAAAA,cAAP,KAA2B,mCAA3B,CACA,OAASC,cAAT,KAA+B,eAA/B,CACA,OAASC,QAAT,KAAyB,kBAAzB,C,6IAOA,GAAMC,CAAAA,OAAyB,CAAG,QAA5BA,CAAAA,OAA4B,MAAqB,8BAAlBC,CAAAA,KAAkB,MAAlBA,KAAkB,CAAXC,IAAW,MAAXA,IAAW,CACrD,oBAAcJ,cAAc,EAA5B,CAAQK,CAAR,iBAAQA,CAAR,CACA,oBAA6BP,cAAc,CAACC,cAAD,CAA3C,CAAQO,gBAAR,iBAAQA,gBAAR,CACA,cAAqDb,QAAQ,CAACU,KAAD,CAAQ,IAAR,CAA7D,CAAQI,MAAR,WAAQA,MAAR,CAAuBC,kBAAvB,WAAgBC,KAAhB,CAA2CC,KAA3C,WAA2CA,KAA3C,CAEA,mBACE,2BACGF,kBAAkB,EACjBA,kBAAkB,CAACG,IAAnB,GAA4B,IAD7B,GAEEP,IAAI,GAAKH,QAAQ,CAACW,UAAlB,cACC,KAAC,IAAD,EAAM,EAAE,CAAEjB,MAAM,CAACkB,eAAjB,uBACE,eACE,OAAO,CAAE,yBAAMP,CAAAA,gBAAgB,EAAIA,gBAAgB,EAA1C,EADX,CAEE,KAAK,CAAE,CAAEQ,KAAK,CAAE,mBAAT,CAA8BC,MAAM,CAAE,EAAtC,CAFT,UAIGV,CAAC,CAAC,uBAAD,CAJJ,EADF,EADD,cAUC,KAAC,IAAD,EAAM,EAAE,CAAEV,MAAM,CAACqB,kBAAjB,uBACE,eACE,OAAO,CAAE,yBAAMV,CAAAA,gBAAgB,EAAIA,gBAAgB,EAA1C,EADX,CAEE,KAAK,CAAE,CAAEQ,KAAK,CAAE,mBAAT,CAA8BC,MAAM,CAAE,EAAtC,CAFT,UAIGV,CAAC,CAAC,uBAAD,CAJJ,EADF,EAZH,CADH,cAsBE,YAAI,SAAS,CAAC,WAAd,WACGE,MAAM,GAAKb,cAAc,CAACuB,OAA1B,GAAqCT,kBAArC,SAAqCA,kBAArC,iBAAqCA,kBAAkB,CAAEG,IAAzD,EACCH,kBADD,SACCA,kBADD,wCACCA,kBAAkB,CAAEG,IADrB,gDACC,sBAA0BO,GAA1B,CACE,SAACC,MAAD,CAAoBC,KAApB,QACED,CAAAA,MAAM,CAACE,MAAP,eACE,sBACGF,MAAM,CAACG,UADV,OACyBzB,WAAW,CAACsB,MAAM,CAACE,MAAR,CADpC,MACuD,GADvD,CAEGzB,qBAAqB,CAACuB,MAAM,CAACI,SAAR,CAFxB,gBAAeH,KAAf,EAFJ,EADF,CADD,cAWC,oBAAKf,CAAC,CAAC,8BAAD,CAAN,EAZJ,CAcGE,MAAM,GAAKb,cAAc,CAAC8B,KAA1B,EAAmCd,KAAnC,eACC,UAAG,SAAS,CAAC,WAAb,UAA0BA,KAA1B,EAfJ,GAtBF,GADF,CA2CD,CAhDD,CAkDA,cAAeR,CAAAA,OAAf","sourcesContent":["import { FC } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { TopPlayer, TopPlayersResponse } from \"../../api/ranking\";\r\nimport useAsync, { ResponseStatus } from \"../../hooks/useAsync\";\r\nimport { Routes } from \"../../routes/CONSTANTS\";\r\nimport { dateTimeFromTimestamp, timeConvert } from \"../../utils/time\";\r\nimport { useRecoilValue } from \"recoil\";\r\nimport gameSoundState from \"../../recoil/atoms/gameSoundState\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport { GameMode } from \"../../types/game\";\r\n\r\ntype TopListProps = {\r\n  fetch: () => Promise<TopPlayersResponse>;\r\n  mode: GameMode;\r\n};\r\n\r\nconst TopList: FC<TopListProps> = ({ fetch, mode }) => {\r\n  const { t } = useTranslation();\r\n  const { playPopUpOnSound } = useRecoilValue(gameSoundState);\r\n  const { status, value: topPlayersResponse, error } = useAsync(fetch, true);\r\n\r\n  return (\r\n    <>\r\n      {topPlayersResponse &&\r\n        topPlayersResponse.data === null &&\r\n        (mode === GameMode.SPEED_MODE ? (\r\n          <Link to={Routes.SPEED_MODE_PAGE}>\r\n            <button\r\n              onClick={() => playPopUpOnSound && playPopUpOnSound()}\r\n              style={{ width: \"calc(100% - 32px)\", margin: 16 }}\r\n            >\r\n              {t(\"Make your own ranking\")}\r\n            </button>\r\n          </Link>\r\n        ) : (\r\n          <Link to={Routes.SURVIVAL_MODE_PAGE}>\r\n            <button\r\n              onClick={() => playPopUpOnSound && playPopUpOnSound()}\r\n              style={{ width: \"calc(100% - 32px)\", margin: 16 }}\r\n            >\r\n              {t(\"Make your own ranking\")}\r\n            </button>\r\n          </Link>\r\n        ))}\r\n      <ol className=\"rank-list\">\r\n        {status === ResponseStatus.SUCCESS && topPlayersResponse?.data ? (\r\n          topPlayersResponse?.data?.map(\r\n            (player: TopPlayer, index: number) =>\r\n              player.timing && (\r\n                <li key={`id-${index}`}>\r\n                  {player.playerName} - {timeConvert(player.timing)} -{\" \"}\r\n                  {dateTimeFromTimestamp(player.timestamp)}\r\n                </li>\r\n              )\r\n          )\r\n        ) : (\r\n          <li>{t(\"Service is under maintenance\")}</li>\r\n        )}\r\n        {status === ResponseStatus.ERROR && error && (\r\n          <p className=\"has-error\">{error}</p>\r\n        )}\r\n      </ol>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TopList;\r\n"]},"metadata":{},"sourceType":"module"}